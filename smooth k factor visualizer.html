<!DOCTYPE html>
<html>
	<head>
		<title>
			Smooth K factor visualizer
		</title>
		<style>
			body {
				background-color: black;
				margin: 0px;
			}
		</style>
	</head>
	<body>
		<canvas id="canvas" width="3000" height="3000">

		</canvas>
	</body>
	<script>
		const SMALL_PRIMES = [
		  2n, 3n, 5n, 7n, 11n, 13n, 17n, 19n, 23n, 29n, 31n, 37n, 41n, 43n, 47n,
		  53n, 59n, 61n, 67n, 71n, 73n, 79n, 83n, 89n, 97n, 101n, 103n, 107n, 109n, 113n
		];
		function buildSmoothK(B1) {
		  let k = 1n;
		  for (const p of SMALL_PRIMES) {
		    if (p > B1) break;
		    let pe = p;
		    while (pe <= B1) {
		      k *= p;
		      pe *= p;
		    }
		  }
		  return k;
		}
		var dot = 0n;
		var canvas = document.getElementById("canvas").getContext("2d");
		var pixel = canvas.createImageData(1, 1);
		var number = 0n;
		var smooth = 0n;
		var spread = 4;
		setInterval(function() {
			dot++;
			smooth = buildSmoothK(dot);
			for(let number = dot; number > 1n && smooth > 1n; number--) {
				if(smooth % number == 0n) {
					smooth /= number;
					pixel.data.set([(255 / spread) * Number(dot) % 256, (255 / spread) * Number(number) % 256, 255, 255]);
					canvas.putImageData(pixel, Number(dot), Number(number));
				}
			}
		}, 10)
	</script>
</html>
